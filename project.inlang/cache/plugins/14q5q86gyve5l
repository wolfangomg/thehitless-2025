var tt=Object.create;var Nn=Object.defineProperty;var rt=Object.getOwnPropertyDescriptor;var it=Object.getOwnPropertyNames;var ot=Object.getPrototypeOf,st=Object.prototype.hasOwnProperty;var An=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var at=(o,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of it(e))!st.call(o,u)&&u!==i&&Nn(o,u,{get:()=>e[u],enumerable:!(n=rt(e,u))||n.enumerable});return o};var Fn=(o,e,i)=>(i=o!=null?tt(ot(o)):{},at(e||!o||!o.__esModule?Nn(i,"default",{value:o,enumerable:!0}):i,o));var Bn=An((Ye,On)=>{(function(o,e){typeof Ye=="object"&&typeof On=="object"?On.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Ye=="object"?Ye.Parsimmon=e():o.Parsimmon=e()})(typeof self<"u"?self:Ye,function(){return function(o){var e={};function i(n){if(e[n])return e[n].exports;var u=e[n]={i:n,l:!1,exports:{}};return o[n].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=o,i.c=e,i.d=function(n,u,p){i.o(n,u)||Object.defineProperty(n,u,{configurable:!1,enumerable:!0,get:p})},i.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},i.n=function(n){var u=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(u,"a",u),u},i.o=function(n,u){return Object.prototype.hasOwnProperty.call(n,u)},i.p="",i(i.s=0)}([function(o,e,i){"use strict";function n(a){if(!(this instanceof n))return new n(a);this._=a}var u=n.prototype;function p(a,d){for(var y=0;y<a;y++)d(y)}function f(a,d,y){return function(O,x){p(x.length,function(w){O(x[w],w,x)})}(function(O,x,w){d=a(d,O,x,w)},y),d}function T(a,d){return f(function(y,O,x,w){return y.concat([a(O,x,w)])},[],d)}function b(a,d){var y={v:0,buf:d};return p(a,function(){var O;y={v:y.v<<1|(O=y.buf,O[0]>>7),buf:function(x){var w=f(function(S,F,D,G){return S.concat(D===G.length-1?Buffer.from([F,0]).readUInt16BE(0):G.readUInt16BE(D))},[],x);return Buffer.from(T(function(S){return(S<<1&65535)>>8},w))}(y.buf)}}),y}function P(){return typeof Buffer<"u"}function m(){if(!P())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function I(a){m();var d=f(function(w,S){return w+S},0,a);if(d%8!=0)throw new Error("The bits ["+a.join(", ")+"] add up to "+d+" which is not an even number of bytes; the total should be divisible by 8");var y,O=d/8,x=(y=function(w){return w>48},f(function(w,S){return w||(y(S)?S:w)},null,a));if(x)throw new Error(x+" bit range requested exceeds 48 bit (6 byte) Number max.");return new n(function(w,S){var F=O+S;return F>w.length?A(S,O.toString()+" bytes"):_(F,f(function(D,G){var Y=b(G,D.buf);return{coll:D.coll.concat(Y.v),buf:Y.buf}},{coll:[],buf:w.slice(S,F)},a).coll)})}function R(a,d){return new n(function(y,O){return m(),O+d>y.length?A(O,d+" bytes for "+a):_(O+d,y.slice(O,O+d))})}function v(a,d){if(typeof(y=d)!="number"||Math.floor(y)!==y||d<0||d>6)throw new Error(a+" requires integer length in range [0, 6].");var y}function j(a){return v("uintBE",a),R("uintBE("+a+")",a).map(function(d){return d.readUIntBE(0,a)})}function N(a){return v("uintLE",a),R("uintLE("+a+")",a).map(function(d){return d.readUIntLE(0,a)})}function B(a){return v("intBE",a),R("intBE("+a+")",a).map(function(d){return d.readIntBE(0,a)})}function k(a){return v("intLE",a),R("intLE("+a+")",a).map(function(d){return d.readIntLE(0,a)})}function $(a){return a instanceof n}function M(a){return{}.toString.call(a)==="[object Array]"}function J(a){return P()&&Buffer.isBuffer(a)}function _(a,d){return{status:!0,index:a,value:d,furthest:-1,expected:[]}}function A(a,d){return M(d)||(d=[d]),{status:!1,index:-1,value:null,furthest:a,expected:d}}function Q(a,d){if(!d||a.furthest>d.furthest)return a;var y=a.furthest===d.furthest?function(O,x){if(function(){if(n._supportsSet!==void 0)return n._supportsSet;var Ie=typeof Set<"u";return n._supportsSet=Ie,Ie}()&&Array.from){for(var w=new Set(O),S=0;S<x.length;S++)w.add(x[S]);var F=Array.from(w);return F.sort(),F}for(var D={},G=0;G<O.length;G++)D[O[G]]=!0;for(var Y=0;Y<x.length;Y++)D[x[Y]]=!0;var ve=[];for(var ie in D)({}).hasOwnProperty.call(D,ie)&&ve.push(ie);return ve.sort(),ve}(a.expected,d.expected):d.expected;return{status:a.status,index:a.index,value:a.value,furthest:d.furthest,expected:y}}var pe={};function Se(a,d){if(J(a))return{offset:d,line:-1,column:-1};a in pe||(pe[a]={});for(var y=pe[a],O=0,x=0,w=0,S=d;S>=0;){if(S in y){O=y[S].line,w===0&&(w=y[S].lineStart);break}(a.charAt(S)===`
`||a.charAt(S)==="\r"&&a.charAt(S+1)!==`
`)&&(x++,w===0&&(w=S+1)),S--}var F=O+x,D=d-w;return y[d]={line:F,lineStart:w},{offset:d,line:F+1,column:D+1}}function fe(a){if(!$(a))throw new Error("not a parser: "+a)}function re(a,d){return typeof a=="string"?a.charAt(d):a[d]}function se(a){if(typeof a!="number")throw new Error("not a number: "+a)}function V(a){if(typeof a!="function")throw new Error("not a function: "+a)}function ae(a){if(typeof a!="string")throw new Error("not a string: "+a)}var je=2,Pe=3,ee=8,Ae=5*ee,He=4*ee,Ue="  ";function ye(a,d){return new Array(d+1).join(a)}function ge(a,d,y){var O=d-a.length;return O<=0?a:ye(y,O)+a}function de(a,d,y,O){return{from:a-d>0?a-d:0,to:a+y>O?O:a+y}}function Fe(a,d){var y,O,x,w,S,F=d.index,D=F.offset,G=1;if(D===a.length)return"Got the end of the input";if(J(a)){var Y=D-D%ee,ve=D-Y,ie=de(Y,Ae,He+ee,a.length),Ie=T(function(W){return T(function(ke){return ge(ke.toString(16),2,"0")},W)},function(W,ke){var Ce=W.length,Ee=[],Ke=0;if(Ce<=ke)return[W.slice()];for(var he=0;he<Ce;he++)Ee[Ke]||Ee.push([]),Ee[Ke].push(W[he]),(he+1)%ke==0&&Ke++;return Ee}(a.slice(ie.from,ie.to).toJSON().data,ee));w=function(W){return W.from===0&&W.to===1?{from:W.from,to:W.to}:{from:W.from/ee,to:Math.floor(W.to/ee)}}(ie),O=Y/ee,y=3*ve,ve>=4&&(y+=1),G=2,x=T(function(W){return W.length<=4?W.join(" "):W.slice(0,4).join(" ")+"  "+W.slice(4).join(" ")},Ie),(S=(8*(w.to>0?w.to-1:w.to)).toString(16).length)<2&&(S=2)}else{var $e=a.split(/\r\n|[\n\r\u2028\u2029]/);y=F.column-1,O=F.line-1,w=de(O,je,Pe,$e.length),x=$e.slice(w.from,w.to),S=w.to.toString().length}var nt=O-w.from;return J(a)&&(S=(8*(w.to>0?w.to-1:w.to)).toString(16).length)<2&&(S=2),f(function(W,ke,Ce){var Ee,Ke=Ce===nt,he=Ke?"> ":Ue;return Ee=J(a)?ge((8*(w.from+Ce)).toString(16),S,"0"):ge((w.from+Ce+1).toString(),S," "),[].concat(W,[he+Ee+" | "+ke],Ke?[Ue+ye(" ",S)+" | "+ge("",y," ")+ye("^",G)]:[])},[],x).join(`
`)}function xe(a,d){return[`
`,"-- PARSING FAILED "+ye("-",50),`

`,Fe(a,d),`

`,(y=d.expected,y.length===1?`Expected:

`+y[0]:`Expected one of the following: 

`+y.join(", ")),`
`].join("");var y}function z(a){return a.flags!==void 0?a.flags:[a.global?"g":"",a.ignoreCase?"i":"",a.multiline?"m":"",a.unicode?"u":"",a.sticky?"y":""].join("")}function me(){for(var a=[].slice.call(arguments),d=a.length,y=0;y<d;y+=1)fe(a[y]);return n(function(O,x){for(var w,S=new Array(d),F=0;F<d;F+=1){if(!(w=Q(a[F]._(O,x),w)).status)return w;S[F]=w.value,x=w.index}return Q(_(x,S),w)})}function ue(){var a=[].slice.call(arguments);if(a.length===0)throw new Error("seqMap needs at least one argument");var d=a.pop();return V(d),me.apply(null,a).map(function(y){return d.apply(null,y)})}function oe(){var a=[].slice.call(arguments),d=a.length;if(d===0)return we("zero alternates");for(var y=0;y<d;y+=1)fe(a[y]);return n(function(O,x){for(var w,S=0;S<a.length;S+=1)if((w=Q(a[S]._(O,x),w)).status)return w;return w})}function be(a,d){return H(a,d).or(ce([]))}function H(a,d){return fe(a),fe(d),ue(a,d.then(a).many(),function(y,O){return[y].concat(O)})}function Te(a){ae(a);var d="'"+a+"'";return n(function(y,O){var x=O+a.length,w=y.slice(O,x);return w===a?_(x,w):A(O,d)})}function Z(a,d){(function(x){if(!(x instanceof RegExp))throw new Error("not a regexp: "+x);for(var w=z(x),S=0;S<w.length;S++){var F=w.charAt(S);if(F!=="i"&&F!=="m"&&F!=="u"&&F!=="s")throw new Error('unsupported regexp flag "'+F+'": '+x)}})(a),arguments.length>=2?se(d):d=0;var y=function(x){return RegExp("^(?:"+x.source+")",z(x))}(a),O=""+a;return n(function(x,w){var S=y.exec(x.slice(w));if(S){if(0<=d&&d<=S.length){var F=S[0],D=S[d];return _(w+F.length,D)}return A(w,"valid match group (0 to "+S.length+") in "+O)}return A(w,O)})}function ce(a){return n(function(d,y){return _(y,a)})}function we(a){return n(function(d,y){return A(y,a)})}function q(a){if($(a))return n(function(d,y){var O=a._(d,y);return O.index=y,O.value="",O});if(typeof a=="string")return q(Te(a));if(a instanceof RegExp)return q(Z(a));throw new Error("not a string, regexp, or parser: "+a)}function s(a){return fe(a),n(function(d,y){var O=a._(d,y),x=d.slice(y,O.index);return O.status?A(y,'not "'+x+'"'):_(y,null)})}function K(a){return V(a),n(function(d,y){var O=re(d,y);return y<d.length&&a(O)?_(y+1,O):A(y,"a character/byte matching "+a)})}function X(a,d){arguments.length<2&&(d=a,a=void 0);var y=n(function(O,x){return y._=d()._,y._(O,x)});return a?y.desc(a):y}function We(){return we("fantasy-land/empty")}u.parse=function(a){if(typeof a!="string"&&!J(a))throw new Error(".parse must be called with a string or Buffer as its argument");var d,y=this.skip(Be)._(a,0);return d=y.status?{status:!0,value:y.value}:{status:!1,index:Se(a,y.furthest),expected:y.expected},delete pe[a],d},u.tryParse=function(a){var d=this.parse(a);if(d.status)return d.value;var y=xe(a,d),O=new Error(y);throw O.type="ParsimmonError",O.result=d,O},u.assert=function(a,d){return this.chain(function(y){return a(y)?ce(y):we(d)})},u.or=function(a){return oe(this,a)},u.trim=function(a){return this.wrap(a,a)},u.wrap=function(a,d){return ue(a,this,d,function(y,O){return O})},u.thru=function(a){return a(this)},u.then=function(a){return fe(a),me(this,a).map(function(d){return d[1]})},u.many=function(){var a=this;return n(function(d,y){for(var O=[],x=void 0;;){if(!(x=Q(a._(d,y),x)).status)return Q(_(y,O),x);if(y===x.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");y=x.index,O.push(x.value)}})},u.tieWith=function(a){return ae(a),this.map(function(d){if(function(x){if(!M(x))throw new Error("not an array: "+x)}(d),d.length){ae(d[0]);for(var y=d[0],O=1;O<d.length;O++)ae(d[O]),y+=a+d[O];return y}return""})},u.tie=function(){return this.tieWith("")},u.times=function(a,d){var y=this;return arguments.length<2&&(d=a),se(a),se(d),n(function(O,x){for(var w=[],S=void 0,F=void 0,D=0;D<a;D+=1){if(F=Q(S=y._(O,x),F),!S.status)return F;x=S.index,w.push(S.value)}for(;D<d&&(F=Q(S=y._(O,x),F),S.status);D+=1)x=S.index,w.push(S.value);return Q(_(x,w),F)})},u.result=function(a){return this.map(function(){return a})},u.atMost=function(a){return this.times(0,a)},u.atLeast=function(a){return ue(this.times(a),this.many(),function(d,y){return d.concat(y)})},u.map=function(a){V(a);var d=this;return n(function(y,O){var x=d._(y,O);return x.status?Q(_(x.index,a(x.value)),x):x})},u.contramap=function(a){V(a);var d=this;return n(function(y,O){var x=d.parse(a(y.slice(O)));return x.status?_(O+y.length,x.value):x})},u.promap=function(a,d){return V(a),V(d),this.contramap(a).map(d)},u.skip=function(a){return me(this,a).map(function(d){return d[0]})},u.mark=function(){return ue(Re,this,Re,function(a,d,y){return{start:a,value:d,end:y}})},u.node=function(a){return ue(Re,this,Re,function(d,y,O){return{name:a,value:y,start:d,end:O}})},u.sepBy=function(a){return be(this,a)},u.sepBy1=function(a){return H(this,a)},u.lookahead=function(a){return this.skip(q(a))},u.notFollowedBy=function(a){return this.skip(s(a))},u.desc=function(a){M(a)||(a=[a]);var d=this;return n(function(y,O){var x=d._(y,O);return x.status||(x.expected=a),x})},u.fallback=function(a){return this.or(ce(a))},u.ap=function(a){return ue(a,this,function(d,y){return d(y)})},u.chain=function(a){var d=this;return n(function(y,O){var x=d._(y,O);return x.status?Q(a(x.value)._(y,x.index),x):x})},u.concat=u.or,u.empty=We,u.of=ce,u["fantasy-land/ap"]=u.ap,u["fantasy-land/chain"]=u.chain,u["fantasy-land/concat"]=u.concat,u["fantasy-land/empty"]=u.empty,u["fantasy-land/of"]=u.of,u["fantasy-land/map"]=u.map;var Re=n(function(a,d){return _(d,Se(a,d))}),Qe=n(function(a,d){return d>=a.length?A(d,"any character/byte"):_(d+1,re(a,d))}),gn=n(function(a,d){return _(a.length,a.slice(d))}),Be=n(function(a,d){return d<a.length?A(d,"EOF"):_(d,null)}),mn=Z(/[0-9]/).desc("a digit"),bn=Z(/[0-9]*/).desc("optional digits"),vn=Z(/[a-z]/i).desc("a letter"),h=Z(/[a-z]*/i).desc("optional letters"),In=Z(/\s*/).desc("optional whitespace"),r=Z(/\s+/).desc("whitespace"),t=Te("\r"),C=Te(`
`),ne=Te(`\r
`),nn=oe(ne,C,t).desc("newline"),et=oe(nn,Be);n.all=gn,n.alt=oe,n.any=Qe,n.cr=t,n.createLanguage=function(a){var d={};for(var y in a)({}).hasOwnProperty.call(a,y)&&function(O){d[O]=X(function(){return a[O](d)})}(y);return d},n.crlf=ne,n.custom=function(a){return n(a(_,A))},n.digit=mn,n.digits=bn,n.empty=We,n.end=et,n.eof=Be,n.fail=we,n.formatError=xe,n.index=Re,n.isParser=$,n.lazy=X,n.letter=vn,n.letters=h,n.lf=C,n.lookahead=q,n.makeFailure=A,n.makeSuccess=_,n.newline=nn,n.noneOf=function(a){return K(function(d){return a.indexOf(d)<0}).desc("none of '"+a+"'")},n.notFollowedBy=s,n.of=ce,n.oneOf=function(a){for(var d=a.split(""),y=0;y<d.length;y++)d[y]="'"+d[y]+"'";return K(function(O){return a.indexOf(O)>=0}).desc(d)},n.optWhitespace=In,n.Parser=n,n.range=function(a,d){return K(function(y){return a<=y&&y<=d}).desc(a+"-"+d)},n.regex=Z,n.regexp=Z,n.sepBy=be,n.sepBy1=H,n.seq=me,n.seqMap=ue,n.seqObj=function(){for(var a,d={},y=0,O=(a=arguments,Array.prototype.slice.call(a)),x=O.length,w=0;w<x;w+=1){var S=O[w];if(!$(S)){if(M(S)&&S.length===2&&typeof S[0]=="string"&&$(S[1])){var F=S[0];if(Object.prototype.hasOwnProperty.call(d,F))throw new Error("seqObj: duplicate key "+F);d[F]=!0,y++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(y===0)throw new Error("seqObj expects at least one named parser, found zero");return n(function(D,G){for(var Y,ve={},ie=0;ie<x;ie+=1){var Ie,$e;if(M(O[ie])?(Ie=O[ie][0],$e=O[ie][1]):(Ie=null,$e=O[ie]),!(Y=Q($e._(D,G),Y)).status)return Y;Ie&&(ve[Ie]=Y.value),G=Y.index}return Q(_(G,ve),Y)})},n.string=Te,n.succeed=ce,n.takeWhile=function(a){return V(a),n(function(d,y){for(var O=y;O<d.length&&a(re(d,O));)O++;return _(O,d.slice(y,O))})},n.test=K,n.whitespace=r,n["fantasy-land/empty"]=We,n["fantasy-land/of"]=ce,n.Binary={bitSeq:I,bitSeqObj:function(a){m();var d={},y=0,O=T(function(w){if(M(w)){var S=w;if(S.length!==2)throw new Error("["+S.join(", ")+"] should be length 2, got length "+S.length);if(ae(S[0]),se(S[1]),Object.prototype.hasOwnProperty.call(d,S[0]))throw new Error("duplicate key in bitSeqObj: "+S[0]);return d[S[0]]=!0,y++,S}return se(w),[null,w]},a);if(y<1)throw new Error("bitSeqObj expects at least one named pair, got ["+a.join(", ")+"]");var x=T(function(w){return w[0]},O);return I(T(function(w){return w[1]},O)).map(function(w){return f(function(S,F){return F[0]!==null&&(S[F[0]]=F[1]),S},{},T(function(S,F){return[S,w[F]]},x))})},byte:function(a){if(m(),se(a),a>255)throw new Error("Value specified to byte constructor ("+a+"=0x"+a.toString(16)+") is larger in value than a single byte.");var d=(a>15?"0x":"0x0")+a.toString(16);return n(function(y,O){var x=re(y,O);return x===a?_(O+1,x):A(O,d)})},buffer:function(a){return R("buffer",a).map(function(d){return Buffer.from(d)})},encodedString:function(a,d){return R("string",d).map(function(y){return y.toString(a)})},uintBE:j,uint8BE:j(1),uint16BE:j(2),uint32BE:j(4),uintLE:N,uint8LE:N(1),uint16LE:N(2),uint32LE:N(4),intBE:B,int8BE:B(1),int16BE:B(2),int32BE:B(4),intLE:k,int8LE:k(1),int16LE:k(2),int32LE:k(4),floatBE:R("floatBE",4).map(function(a){return a.readFloatBE(0)}),floatLE:R("floatLE",4).map(function(a){return a.readFloatLE(0)}),doubleBE:R("doubleBE",8).map(function(a){return a.readDoubleBE(0)}),doubleLE:R("doubleLE",8).map(function(a){return a.readDoubleLE(0)})},o.exports=n}])})});var hn=An(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.Type=c.JsonType=c.JavaScriptTypeBuilder=c.JsonTypeBuilder=c.TypeBuilder=c.TypeBuilderError=c.TransformEncodeBuilder=c.TransformDecodeBuilder=c.TemplateLiteralDslParser=c.TemplateLiteralGenerator=c.TemplateLiteralGeneratorError=c.TemplateLiteralFinite=c.TemplateLiteralFiniteError=c.TemplateLiteralParser=c.TemplateLiteralParserError=c.TemplateLiteralResolver=c.TemplateLiteralPattern=c.TemplateLiteralPatternError=c.UnionResolver=c.KeyArrayResolver=c.KeyArrayResolverError=c.KeyResolver=c.ObjectMap=c.Intrinsic=c.IndexedAccessor=c.TypeClone=c.TypeExtends=c.TypeExtendsResult=c.TypeExtendsError=c.ExtendsUndefined=c.TypeGuard=c.TypeGuardUnknownTypeError=c.ValueGuard=c.FormatRegistry=c.TypeBoxError=c.TypeRegistry=c.PatternStringExact=c.PatternNumberExact=c.PatternBooleanExact=c.PatternString=c.PatternNumber=c.PatternBoolean=c.Kind=c.Hint=c.Optional=c.Readonly=c.Transform=void 0;c.Transform=Symbol.for("TypeBox.Transform");c.Readonly=Symbol.for("TypeBox.Readonly");c.Optional=Symbol.for("TypeBox.Optional");c.Hint=Symbol.for("TypeBox.Hint");c.Kind=Symbol.for("TypeBox.Kind");c.PatternBoolean="(true|false)";c.PatternNumber="(0|[1-9][0-9]*)";c.PatternString="(.*)";c.PatternBooleanExact=`^${c.PatternBoolean}$`;c.PatternNumberExact=`^${c.PatternNumber}$`;c.PatternStringExact=`^${c.PatternString}$`;var Pn;(function(o){let e=new Map;function i(){return new Map(e)}o.Entries=i;function n(){return e.clear()}o.Clear=n;function u(b){return e.delete(b)}o.Delete=u;function p(b){return e.has(b)}o.Has=p;function f(b,P){e.set(b,P)}o.Set=f;function T(b){return e.get(b)}o.Get=T})(Pn||(c.TypeRegistry=Pn={}));var le=class extends Error{constructor(e){super(e)}};c.TypeBoxError=le;var Cn;(function(o){let e=new Map;function i(){return new Map(e)}o.Entries=i;function n(){return e.clear()}o.Clear=n;function u(b){return e.delete(b)}o.Delete=u;function p(b){return e.has(b)}o.Has=p;function f(b,P){e.set(b,P)}o.Set=f;function T(b){return e.get(b)}o.Get=T})(Cn||(c.FormatRegistry=Cn={}));var U;(function(o){function e(I){return Array.isArray(I)}o.IsArray=e;function i(I){return typeof I=="bigint"}o.IsBigInt=i;function n(I){return typeof I=="boolean"}o.IsBoolean=n;function u(I){return I instanceof globalThis.Date}o.IsDate=u;function p(I){return I===null}o.IsNull=p;function f(I){return typeof I=="number"}o.IsNumber=f;function T(I){return typeof I=="object"&&I!==null}o.IsObject=T;function b(I){return typeof I=="string"}o.IsString=b;function P(I){return I instanceof globalThis.Uint8Array}o.IsUint8Array=P;function m(I){return I===void 0}o.IsUndefined=m})(U||(c.ValueGuard=U={}));var xn=class extends le{};c.TypeGuardUnknownTypeError=xn;var l;(function(o){function e(s){try{return new RegExp(s),!0}catch{return!1}}function i(s){if(!U.IsString(s))return!1;for(let K=0;K<s.length;K++){let X=s.charCodeAt(K);if(X>=7&&X<=13||X===27||X===127)return!1}return!0}function n(s){return f(s)||q(s)}function u(s){return U.IsUndefined(s)||U.IsBigInt(s)}function p(s){return U.IsUndefined(s)||U.IsNumber(s)}function f(s){return U.IsUndefined(s)||U.IsBoolean(s)}function T(s){return U.IsUndefined(s)||U.IsString(s)}function b(s){return U.IsUndefined(s)||U.IsString(s)&&i(s)&&e(s)}function P(s){return U.IsUndefined(s)||U.IsString(s)&&i(s)}function m(s){return U.IsUndefined(s)||q(s)}function I(s){return A(s,"Any")&&T(s.$id)}o.TAny=I;function R(s){return A(s,"Array")&&s.type==="array"&&T(s.$id)&&q(s.items)&&p(s.minItems)&&p(s.maxItems)&&f(s.uniqueItems)&&m(s.contains)&&p(s.minContains)&&p(s.maxContains)}o.TArray=R;function v(s){return A(s,"AsyncIterator")&&s.type==="AsyncIterator"&&T(s.$id)&&q(s.items)}o.TAsyncIterator=v;function j(s){return A(s,"BigInt")&&s.type==="bigint"&&T(s.$id)&&u(s.exclusiveMaximum)&&u(s.exclusiveMinimum)&&u(s.maximum)&&u(s.minimum)&&u(s.multipleOf)}o.TBigInt=j;function N(s){return A(s,"Boolean")&&s.type==="boolean"&&T(s.$id)}o.TBoolean=N;function B(s){return A(s,"Constructor")&&s.type==="Constructor"&&T(s.$id)&&U.IsArray(s.parameters)&&s.parameters.every(K=>q(K))&&q(s.returns)}o.TConstructor=B;function k(s){return A(s,"Date")&&s.type==="Date"&&T(s.$id)&&p(s.exclusiveMaximumTimestamp)&&p(s.exclusiveMinimumTimestamp)&&p(s.maximumTimestamp)&&p(s.minimumTimestamp)&&p(s.multipleOfTimestamp)}o.TDate=k;function $(s){return A(s,"Function")&&s.type==="Function"&&T(s.$id)&&U.IsArray(s.parameters)&&s.parameters.every(K=>q(K))&&q(s.returns)}o.TFunction=$;function M(s){return A(s,"Integer")&&s.type==="integer"&&T(s.$id)&&p(s.exclusiveMaximum)&&p(s.exclusiveMinimum)&&p(s.maximum)&&p(s.minimum)&&p(s.multipleOf)}o.TInteger=M;function J(s){return A(s,"Intersect")&&!(U.IsString(s.type)&&s.type!=="object")&&U.IsArray(s.allOf)&&s.allOf.every(K=>q(K)&&!xe(K))&&T(s.type)&&(f(s.unevaluatedProperties)||m(s.unevaluatedProperties))&&T(s.$id)}o.TIntersect=J;function _(s){return A(s,"Iterator")&&s.type==="Iterator"&&T(s.$id)&&q(s.items)}o.TIterator=_;function A(s,K){return Q(s)&&s[c.Kind]===K}o.TKindOf=A;function Q(s){return U.IsObject(s)&&c.Kind in s&&U.IsString(s[c.Kind])}o.TKind=Q;function pe(s){return re(s)&&U.IsString(s.const)}o.TLiteralString=pe;function Se(s){return re(s)&&U.IsNumber(s.const)}o.TLiteralNumber=Se;function fe(s){return re(s)&&U.IsBoolean(s.const)}o.TLiteralBoolean=fe;function re(s){return A(s,"Literal")&&T(s.$id)&&(U.IsBoolean(s.const)||U.IsNumber(s.const)||U.IsString(s.const))}o.TLiteral=re;function se(s){return A(s,"Never")&&U.IsObject(s.not)&&Object.getOwnPropertyNames(s.not).length===0}o.TNever=se;function V(s){return A(s,"Not")&&q(s.not)}o.TNot=V;function ae(s){return A(s,"Null")&&s.type==="null"&&T(s.$id)}o.TNull=ae;function je(s){return A(s,"Number")&&s.type==="number"&&T(s.$id)&&p(s.exclusiveMaximum)&&p(s.exclusiveMinimum)&&p(s.maximum)&&p(s.minimum)&&p(s.multipleOf)}o.TNumber=je;function Pe(s){return A(s,"Object")&&s.type==="object"&&T(s.$id)&&U.IsObject(s.properties)&&n(s.additionalProperties)&&p(s.minProperties)&&p(s.maxProperties)&&Object.entries(s.properties).every(([K,X])=>i(K)&&q(X))}o.TObject=Pe;function ee(s){return A(s,"Promise")&&s.type==="Promise"&&T(s.$id)&&q(s.item)}o.TPromise=ee;function Ae(s){return A(s,"Record")&&s.type==="object"&&T(s.$id)&&n(s.additionalProperties)&&U.IsObject(s.patternProperties)&&(K=>{let X=Object.getOwnPropertyNames(K.patternProperties);return X.length===1&&e(X[0])&&U.IsObject(K.patternProperties)&&q(K.patternProperties[X[0]])})(s)}o.TRecord=Ae;function He(s){return U.IsObject(s)&&c.Hint in s&&s[c.Hint]==="Recursive"}o.TRecursive=He;function Ue(s){return A(s,"Ref")&&T(s.$id)&&U.IsString(s.$ref)}o.TRef=Ue;function ye(s){return A(s,"String")&&s.type==="string"&&T(s.$id)&&p(s.minLength)&&p(s.maxLength)&&b(s.pattern)&&P(s.format)}o.TString=ye;function ge(s){return A(s,"Symbol")&&s.type==="symbol"&&T(s.$id)}o.TSymbol=ge;function de(s){return A(s,"TemplateLiteral")&&s.type==="string"&&U.IsString(s.pattern)&&s.pattern[0]==="^"&&s.pattern[s.pattern.length-1]==="$"}o.TTemplateLiteral=de;function Fe(s){return A(s,"This")&&T(s.$id)&&U.IsString(s.$ref)}o.TThis=Fe;function xe(s){return U.IsObject(s)&&c.Transform in s}o.TTransform=xe;function z(s){return A(s,"Tuple")&&s.type==="array"&&T(s.$id)&&U.IsNumber(s.minItems)&&U.IsNumber(s.maxItems)&&s.minItems===s.maxItems&&(U.IsUndefined(s.items)&&U.IsUndefined(s.additionalItems)&&s.minItems===0||U.IsArray(s.items)&&s.items.every(K=>q(K)))}o.TTuple=z;function me(s){return A(s,"Undefined")&&s.type==="undefined"&&T(s.$id)}o.TUndefined=me;function ue(s){return oe(s)&&s.anyOf.every(K=>pe(K)||Se(K))}o.TUnionLiteral=ue;function oe(s){return A(s,"Union")&&T(s.$id)&&U.IsObject(s)&&U.IsArray(s.anyOf)&&s.anyOf.every(K=>q(K))}o.TUnion=oe;function be(s){return A(s,"Uint8Array")&&s.type==="Uint8Array"&&T(s.$id)&&p(s.minByteLength)&&p(s.maxByteLength)}o.TUint8Array=be;function H(s){return A(s,"Unknown")&&T(s.$id)}o.TUnknown=H;function Te(s){return A(s,"Unsafe")}o.TUnsafe=Te;function Z(s){return A(s,"Void")&&s.type==="void"&&T(s.$id)}o.TVoid=Z;function ce(s){return U.IsObject(s)&&s[c.Readonly]==="Readonly"}o.TReadonly=ce;function we(s){return U.IsObject(s)&&s[c.Optional]==="Optional"}o.TOptional=we;function q(s){return U.IsObject(s)&&(I(s)||R(s)||N(s)||j(s)||v(s)||B(s)||k(s)||$(s)||M(s)||J(s)||_(s)||re(s)||se(s)||V(s)||ae(s)||je(s)||Pe(s)||ee(s)||Ae(s)||Ue(s)||ye(s)||ge(s)||de(s)||Fe(s)||z(s)||me(s)||oe(s)||be(s)||H(s)||Te(s)||Z(s)||Q(s)&&Pn.Has(s[c.Kind]))}o.TSchema=q})(l||(c.TypeGuard=l={}));var Kn;(function(o){function e(i){return i[c.Kind]==="Intersect"?i.allOf.every(n=>e(n)):i[c.Kind]==="Union"?i.anyOf.some(n=>e(n)):i[c.Kind]==="Undefined"?!0:i[c.Kind]==="Not"?!e(i.not):!1}o.Check=e})(Kn||(c.ExtendsUndefined=Kn={}));var rn=class extends le{};c.TypeExtendsError=rn;var g;(function(o){o[o.Union=0]="Union",o[o.True=1]="True",o[o.False=2]="False"})(g||(c.TypeExtendsResult=g={}));var Le;(function(o){function e(r){return r===g.False?r:g.True}function i(r){throw new rn(r)}function n(r){return l.TNever(r)||l.TIntersect(r)||l.TUnion(r)||l.TUnknown(r)||l.TAny(r)}function u(r,t){return l.TNever(t)?A(r,t):l.TIntersect(t)?$(r,t):l.TUnion(t)?Qe(r,t):l.TUnknown(t)?Be(r,t):l.TAny(t)?p(r,t):i("StructuralRight")}function p(r,t){return g.True}function f(r,t){return l.TIntersect(t)?$(r,t):l.TUnion(t)&&t.anyOf.some(C=>l.TAny(C)||l.TUnknown(C))?g.True:l.TUnion(t)?g.Union:l.TUnknown(t)||l.TAny(t)?g.True:g.Union}function T(r,t){return l.TUnknown(r)?g.False:l.TAny(r)?g.Union:l.TNever(r)?g.True:g.False}function b(r,t){return l.TObject(t)&&de(t)?g.True:n(t)?u(r,t):l.TArray(t)?e(h(r.items,t.items)):g.False}function P(r,t){return n(t)?u(r,t):l.TAsyncIterator(t)?e(h(r.items,t.items)):g.False}function m(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TBigInt(t)?g.True:g.False}function I(r,t){return l.TLiteral(r)&&U.IsBoolean(r.const)||l.TBoolean(r)?g.True:g.False}function R(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TBoolean(t)?g.True:g.False}function v(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TConstructor(t)?r.parameters.length>t.parameters.length?g.False:r.parameters.every((C,ne)=>e(h(t.parameters[ne],C))===g.True)?e(h(r.returns,t.returns)):g.False:g.False}function j(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TDate(t)?g.True:g.False}function N(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TFunction(t)?r.parameters.length>t.parameters.length?g.False:r.parameters.every((C,ne)=>e(h(t.parameters[ne],C))===g.True)?e(h(r.returns,t.returns)):g.False:g.False}function B(r,t){return l.TLiteral(r)&&U.IsNumber(r.const)||l.TNumber(r)||l.TInteger(r)?g.True:g.False}function k(r,t){return l.TInteger(t)||l.TNumber(t)?g.True:n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):g.False}function $(r,t){return t.allOf.every(C=>h(r,C)===g.True)?g.True:g.False}function M(r,t){return r.allOf.some(C=>h(C,t)===g.True)?g.True:g.False}function J(r,t){return n(t)?u(r,t):l.TIterator(t)?e(h(r.items,t.items)):g.False}function _(r,t){return l.TLiteral(t)&&t.const===r.const?g.True:n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TString(t)?Z(r,t):l.TNumber(t)?re(r,t):l.TInteger(t)?B(r,t):l.TBoolean(t)?I(r,t):g.False}function A(r,t){return g.False}function Q(r,t){return g.True}function pe(r){let[t,C]=[r,0];for(;l.TNot(t);)t=t.not,C+=1;return C%2===0?t:c.Type.Unknown()}function Se(r,t){return l.TNot(r)?h(pe(r),t):l.TNot(t)?h(r,pe(t)):i("Invalid fallthrough for Not")}function fe(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TNull(t)?g.True:g.False}function re(r,t){return l.TLiteralNumber(r)||l.TNumber(r)||l.TInteger(r)?g.True:g.False}function se(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TInteger(t)||l.TNumber(t)?g.True:g.False}function V(r,t){return Object.getOwnPropertyNames(r.properties).length===t}function ae(r){return de(r)}function je(r){return V(r,0)||V(r,1)&&"description"in r.properties&&l.TUnion(r.properties.description)&&r.properties.description.anyOf.length===2&&(l.TString(r.properties.description.anyOf[0])&&l.TUndefined(r.properties.description.anyOf[1])||l.TString(r.properties.description.anyOf[1])&&l.TUndefined(r.properties.description.anyOf[0]))}function Pe(r){return V(r,0)}function ee(r){return V(r,0)}function Ae(r){return V(r,0)}function He(r){return V(r,0)}function Ue(r){return de(r)}function ye(r){let t=c.Type.Number();return V(r,0)||V(r,1)&&"length"in r.properties&&e(h(r.properties.length,t))===g.True}function ge(r){return V(r,0)}function de(r){let t=c.Type.Number();return V(r,0)||V(r,1)&&"length"in r.properties&&e(h(r.properties.length,t))===g.True}function Fe(r){let t=c.Type.Function([c.Type.Any()],c.Type.Any());return V(r,0)||V(r,1)&&"then"in r.properties&&e(h(r.properties.then,t))===g.True}function xe(r,t){return h(r,t)===g.False||l.TOptional(r)&&!l.TOptional(t)?g.False:g.True}function z(r,t){return l.TUnknown(r)?g.False:l.TAny(r)?g.Union:l.TNever(r)||l.TLiteralString(r)&&ae(t)||l.TLiteralNumber(r)&&Pe(t)||l.TLiteralBoolean(r)&&ee(t)||l.TSymbol(r)&&je(t)||l.TBigInt(r)&&Ae(t)||l.TString(r)&&ae(t)||l.TSymbol(r)&&je(t)||l.TNumber(r)&&Pe(t)||l.TInteger(r)&&Pe(t)||l.TBoolean(r)&&ee(t)||l.TUint8Array(r)&&Ue(t)||l.TDate(r)&&He(t)||l.TConstructor(r)&&ge(t)||l.TFunction(r)&&ye(t)?g.True:l.TRecord(r)&&l.TString(oe(r))?t[c.Hint]==="Record"?g.True:g.False:l.TRecord(r)&&l.TNumber(oe(r))?V(t,0)?g.True:g.False:g.False}function me(r,t){return n(t)?u(r,t):l.TRecord(t)?H(r,t):l.TObject(t)?(()=>{for(let C of Object.getOwnPropertyNames(t.properties)){if(!(C in r.properties)&&!l.TOptional(t.properties[C]))return g.False;if(l.TOptional(t.properties[C]))return g.True;if(xe(r.properties[C],t.properties[C])===g.False)return g.False}return g.True})():g.False}function ue(r,t){return n(t)?u(r,t):l.TObject(t)&&Fe(t)?g.True:l.TPromise(t)?e(h(r.item,t.item)):g.False}function oe(r){return c.PatternNumberExact in r.patternProperties?c.Type.Number():c.PatternStringExact in r.patternProperties?c.Type.String():i("Unknown record key pattern")}function be(r){return c.PatternNumberExact in r.patternProperties?r.patternProperties[c.PatternNumberExact]:c.PatternStringExact in r.patternProperties?r.patternProperties[c.PatternStringExact]:i("Unable to get record value schema")}function H(r,t){let[C,ne]=[oe(t),be(t)];return l.TLiteralString(r)&&l.TNumber(C)&&e(h(r,ne))===g.True?g.True:l.TUint8Array(r)&&l.TNumber(C)||l.TString(r)&&l.TNumber(C)||l.TArray(r)&&l.TNumber(C)?h(r,ne):l.TObject(r)?(()=>{for(let nn of Object.getOwnPropertyNames(r.properties))if(xe(ne,r.properties[nn])===g.False)return g.False;return g.True})():g.False}function Te(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?h(be(r),be(t)):g.False}function Z(r,t){return l.TLiteral(r)&&U.IsString(r.const)||l.TString(r)?g.True:g.False}function ce(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TString(t)?g.True:g.False}function we(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TSymbol(t)?g.True:g.False}function q(r,t){return l.TTemplateLiteral(r)?h(Oe.Resolve(r),t):l.TTemplateLiteral(t)?h(r,Oe.Resolve(t)):i("Invalid fallthrough for TemplateLiteral")}function s(r,t){return l.TArray(t)&&r.items!==void 0&&r.items.every(C=>h(C,t.items)===g.True)}function K(r,t){return l.TNever(r)?g.True:l.TUnknown(r)?g.False:l.TAny(r)?g.Union:g.False}function X(r,t){return n(t)?u(r,t):l.TObject(t)&&de(t)||l.TArray(t)&&s(r,t)?g.True:l.TTuple(t)?U.IsUndefined(r.items)&&!U.IsUndefined(t.items)||!U.IsUndefined(r.items)&&U.IsUndefined(t.items)?g.False:U.IsUndefined(r.items)&&!U.IsUndefined(t.items)||r.items.every((C,ne)=>h(C,t.items[ne])===g.True)?g.True:g.False:g.False}function We(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TUint8Array(t)?g.True:g.False}function Re(r,t){return n(t)?u(r,t):l.TObject(t)?z(r,t):l.TRecord(t)?H(r,t):l.TVoid(t)?bn(r,t):l.TUndefined(t)?g.True:g.False}function Qe(r,t){return t.anyOf.some(C=>h(r,C)===g.True)?g.True:g.False}function gn(r,t){return r.anyOf.every(C=>h(C,t)===g.True)?g.True:g.False}function Be(r,t){return g.True}function mn(r,t){return l.TNever(t)?A(r,t):l.TIntersect(t)?$(r,t):l.TUnion(t)?Qe(r,t):l.TAny(t)?p(r,t):l.TString(t)?Z(r,t):l.TNumber(t)?re(r,t):l.TInteger(t)?B(r,t):l.TBoolean(t)?I(r,t):l.TArray(t)?T(r,t):l.TTuple(t)?K(r,t):l.TObject(t)?z(r,t):l.TUnknown(t)?g.True:g.False}function bn(r,t){return l.TUndefined(r)||l.TUndefined(r)?g.True:g.False}function vn(r,t){return l.TIntersect(t)?$(r,t):l.TUnion(t)?Qe(r,t):l.TUnknown(t)?Be(r,t):l.TAny(t)?p(r,t):l.TObject(t)?z(r,t):l.TVoid(t)?g.True:g.False}function h(r,t){return l.TTemplateLiteral(r)||l.TTemplateLiteral(t)?q(r,t):l.TNot(r)||l.TNot(t)?Se(r,t):l.TAny(r)?f(r,t):l.TArray(r)?b(r,t):l.TBigInt(r)?m(r,t):l.TBoolean(r)?R(r,t):l.TAsyncIterator(r)?P(r,t):l.TConstructor(r)?v(r,t):l.TDate(r)?j(r,t):l.TFunction(r)?N(r,t):l.TInteger(r)?k(r,t):l.TIntersect(r)?M(r,t):l.TIterator(r)?J(r,t):l.TLiteral(r)?_(r,t):l.TNever(r)?Q(r,t):l.TNull(r)?fe(r,t):l.TNumber(r)?se(r,t):l.TObject(r)?me(r,t):l.TRecord(r)?Te(r,t):l.TString(r)?ce(r,t):l.TSymbol(r)?we(r,t):l.TTuple(r)?X(r,t):l.TPromise(r)?ue(r,t):l.TUint8Array(r)?We(r,t):l.TUndefined(r)?Re(r,t):l.TUnion(r)?gn(r,t):l.TUnknown(r)?mn(r,t):l.TVoid(r)?vn(r,t):i(`Unknown left type operand '${r[c.Kind]}'`)}function In(r,t){return h(r,t)}o.Extends=In})(Le||(c.TypeExtends=Le={}));var E;(function(o){function e(b){return b.map(P=>p(P))}function i(b){return new Date(b.getTime())}function n(b){return new Uint8Array(b)}function u(b){let P=Object.getOwnPropertyNames(b).reduce((I,R)=>({...I,[R]:p(b[R])}),{}),m=Object.getOwnPropertySymbols(b).reduce((I,R)=>({...I,[R]:p(b[R])}),{});return{...P,...m}}function p(b){return U.IsArray(b)?e(b):U.IsDate(b)?i(b):U.IsUint8Array(b)?n(b):U.IsObject(b)?u(b):b}function f(b){return b.map(P=>T(P))}o.Rest=f;function T(b,P={}){return{...p(b),...P}}o.Type=T})(E||(c.TypeClone=E={}));var wn;(function(o){function e(v){return v.map(j=>{let{[c.Optional]:N,...B}=E.Type(j);return B})}function i(v){return v.every(j=>l.TOptional(j))}function n(v){return v.some(j=>l.TOptional(j))}function u(v){return i(v.allOf)?c.Type.Optional(c.Type.Intersect(e(v.allOf))):v}function p(v){return n(v.anyOf)?c.Type.Optional(c.Type.Union(e(v.anyOf))):v}function f(v){return v[c.Kind]==="Intersect"?u(v):v[c.Kind]==="Union"?p(v):v}function T(v,j){let N=v.allOf.reduce((B,k)=>{let $=I(k,j);return $[c.Kind]==="Never"?B:[...B,$]},[]);return f(c.Type.Intersect(N))}function b(v,j){let N=v.anyOf.map(B=>I(B,j));return f(c.Type.Union(N))}function P(v,j){let N=v.properties[j];return U.IsUndefined(N)?c.Type.Never():c.Type.Union([N])}function m(v,j){let N=v.items;if(U.IsUndefined(N))return c.Type.Never();let B=N[j];return U.IsUndefined(B)?c.Type.Never():B}function I(v,j){return v[c.Kind]==="Intersect"?T(v,j):v[c.Kind]==="Union"?b(v,j):v[c.Kind]==="Object"?P(v,j):v[c.Kind]==="Tuple"?m(v,j):c.Type.Never()}function R(v,j,N={}){let B=j.map(k=>I(v,k.toString()));return f(c.Type.Union(B,N))}o.Resolve=R})(wn||(c.IndexedAccessor=wn={}));var Me;(function(o){function e(m){let[I,R]=[m.slice(0,1),m.slice(1)];return`${I.toLowerCase()}${R}`}function i(m){let[I,R]=[m.slice(0,1),m.slice(1)];return`${I.toUpperCase()}${R}`}function n(m){return m.toUpperCase()}function u(m){return m.toLowerCase()}function p(m,I){let R=De.ParseExact(m.pattern);if(!Ve.Check(R))return{...m,pattern:f(m.pattern,I)};let N=[...qe.Generate(R)].map($=>c.Type.Literal($)),B=T(N,I),k=c.Type.Union(B);return c.Type.TemplateLiteral([k])}function f(m,I){return typeof m=="string"?I==="Uncapitalize"?e(m):I==="Capitalize"?i(m):I==="Uppercase"?n(m):I==="Lowercase"?u(m):m:m.toString()}function T(m,I){if(m.length===0)return[];let[R,...v]=m;return[P(R,I),...T(v,I)]}function b(m,I){return l.TTemplateLiteral(m)?p(m,I):l.TUnion(m)?c.Type.Union(T(m.anyOf,I)):l.TLiteral(m)?c.Type.Literal(f(m.const,I)):m}function P(m,I){return b(m,I)}o.Map=P})(Me||(c.Intrinsic=Me={}));var _e;(function(o){function e(f,T){return c.Type.Intersect(f.allOf.map(b=>u(b,T)),{...f})}function i(f,T){return c.Type.Union(f.anyOf.map(b=>u(b,T)),{...f})}function n(f,T){return T(f)}function u(f,T){return f[c.Kind]==="Intersect"?e(f,T):f[c.Kind]==="Union"?i(f,T):f[c.Kind]==="Object"?n(f,T):f}function p(f,T,b){return{...u(E.Type(f),T),...b}}o.Map=p})(_e||(c.ObjectMap=_e={}));var on;(function(o){function e(P){return P[0]==="^"&&P[P.length-1]==="$"?P.slice(1,P.length-1):P}function i(P,m){return P.allOf.reduce((I,R)=>[...I,...f(R,m)],[])}function n(P,m){let I=P.anyOf.map(R=>f(R,m));return[...I.reduce((R,v)=>v.map(j=>I.every(N=>N.includes(j))?R.add(j):R)[0],new Set)]}function u(P,m){return Object.getOwnPropertyNames(P.properties)}function p(P,m){return m.includePatterns?Object.getOwnPropertyNames(P.patternProperties):[]}function f(P,m){return l.TIntersect(P)?i(P,m):l.TUnion(P)?n(P,m):l.TObject(P)?u(P,m):l.TRecord(P)?p(P,m):[]}function T(P,m){return[...new Set(f(P,m))]}o.ResolveKeys=T;function b(P){return`^(${T(P,{includePatterns:!0}).map(R=>`(${e(R)})`).join("|")})$`}o.ResolvePattern=b})(on||(c.KeyResolver=on={}));var sn=class extends le{};c.KeyArrayResolverError=sn;var Ze;(function(o){function e(i){return Array.isArray(i)?i:l.TUnionLiteral(i)?i.anyOf.map(n=>n.const.toString()):l.TLiteral(i)?[i.const]:l.TTemplateLiteral(i)?(()=>{let n=De.ParseExact(i.pattern);if(!Ve.Check(n))throw new sn("Cannot resolve keys from infinite template expression");return[...qe.Generate(n)]})():[]}o.Resolve=e})(Ze||(c.KeyArrayResolver=Ze={}));var Sn;(function(o){function*e(n){for(let u of n.anyOf)u[c.Kind]==="Union"?yield*e(u):yield u}function i(n){return c.Type.Union([...e(n)],{...n})}o.Resolve=i})(Sn||(c.UnionResolver=Sn={}));var an=class extends le{};c.TemplateLiteralPatternError=an;var un;(function(o){function e(p){throw new an(p)}function i(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n(p,f){return l.TTemplateLiteral(p)?p.pattern.slice(1,p.pattern.length-1):l.TUnion(p)?`(${p.anyOf.map(T=>n(T,f)).join("|")})`:l.TNumber(p)?`${f}${c.PatternNumber}`:l.TInteger(p)?`${f}${c.PatternNumber}`:l.TBigInt(p)?`${f}${c.PatternNumber}`:l.TString(p)?`${f}${c.PatternString}`:l.TLiteral(p)?`${f}${i(p.const.toString())}`:l.TBoolean(p)?`${f}${c.PatternBoolean}`:e(`Unexpected Kind '${p[c.Kind]}'`)}function u(p){return`^${p.map(f=>n(f,"")).join("")}$`}o.Create=u})(un||(c.TemplateLiteralPattern=un={}));var Oe;(function(o){function e(i){let n=De.ParseExact(i.pattern);if(!Ve.Check(n))return c.Type.String();let u=[...qe.Generate(n)].map(p=>c.Type.Literal(p));return c.Type.Union(u)}o.Resolve=e})(Oe||(c.TemplateLiteralResolver=Oe={}));var Xe=class extends le{};c.TemplateLiteralParserError=Xe;var De;(function(o){function e(v,j,N){return v[j]===N&&v.charCodeAt(j-1)!==92}function i(v,j){return e(v,j,"(")}function n(v,j){return e(v,j,")")}function u(v,j){return e(v,j,"|")}function p(v){if(!(i(v,0)&&n(v,v.length-1)))return!1;let j=0;for(let N=0;N<v.length;N++)if(i(v,N)&&(j+=1),n(v,N)&&(j-=1),j===0&&N!==v.length-1)return!1;return!0}function f(v){return v.slice(1,v.length-1)}function T(v){let j=0;for(let N=0;N<v.length;N++)if(i(v,N)&&(j+=1),n(v,N)&&(j-=1),u(v,N)&&j===0)return!0;return!1}function b(v){for(let j=0;j<v.length;j++)if(i(v,j))return!0;return!1}function P(v){let[j,N]=[0,0],B=[];for(let $=0;$<v.length;$++)if(i(v,$)&&(j+=1),n(v,$)&&(j-=1),u(v,$)&&j===0){let M=v.slice(N,$);M.length>0&&B.push(I(M)),N=$+1}let k=v.slice(N);return k.length>0&&B.push(I(k)),B.length===0?{type:"const",const:""}:B.length===1?B[0]:{type:"or",expr:B}}function m(v){function j(k,$){if(!i(k,$))throw new Xe("TemplateLiteralParser: Index must point to open parens");let M=0;for(let J=$;J<k.length;J++)if(i(k,J)&&(M+=1),n(k,J)&&(M-=1),M===0)return[$,J];throw new Xe("TemplateLiteralParser: Unclosed group parens in expression")}function N(k,$){for(let M=$;M<k.length;M++)if(i(k,M))return[$,M];return[$,k.length]}let B=[];for(let k=0;k<v.length;k++)if(i(v,k)){let[$,M]=j(v,k),J=v.slice($,M+1);B.push(I(J)),k=M}else{let[$,M]=N(v,k),J=v.slice($,M);J.length>0&&B.push(I(J)),k=M-1}return B.length===0?{type:"const",const:""}:B.length===1?B[0]:{type:"and",expr:B}}function I(v){return p(v)?I(f(v)):T(v)?P(v):b(v)?m(v):{type:"const",const:v}}o.Parse=I;function R(v){return I(v.slice(1,v.length-1))}o.ParseExact=R})(De||(c.TemplateLiteralParser=De={}));var cn=class extends le{};c.TemplateLiteralFiniteError=cn;var Ve;(function(o){function e(f){throw new cn(f)}function i(f){return f.type==="or"&&f.expr.length===2&&f.expr[0].type==="const"&&f.expr[0].const==="0"&&f.expr[1].type==="const"&&f.expr[1].const==="[1-9][0-9]*"}function n(f){return f.type==="or"&&f.expr.length===2&&f.expr[0].type==="const"&&f.expr[0].const==="true"&&f.expr[1].type==="const"&&f.expr[1].const==="false"}function u(f){return f.type==="const"&&f.const===".*"}function p(f){return n(f)?!0:i(f)||u(f)?!1:f.type==="and"?f.expr.every(T=>p(T)):f.type==="or"?f.expr.every(T=>p(T)):f.type==="const"?!0:e("Unknown expression type")}o.Check=p})(Ve||(c.TemplateLiteralFinite=Ve={}));var ln=class extends le{};c.TemplateLiteralGeneratorError=ln;var qe;(function(o){function*e(f){if(f.length===1)return yield*f[0];for(let T of f[0])for(let b of e(f.slice(1)))yield`${T}${b}`}function*i(f){return yield*e(f.expr.map(T=>[...p(T)]))}function*n(f){for(let T of f.expr)yield*p(T)}function*u(f){return yield f.const}function*p(f){return f.type==="and"?yield*i(f):f.type==="or"?yield*n(f):f.type==="const"?yield*u(f):(()=>{throw new ln("Unknown expression")})()}o.Generate=p})(qe||(c.TemplateLiteralGenerator=qe={}));var jn;(function(o){function*e(p){let f=p.trim().replace(/"|'/g,"");return f==="boolean"?yield c.Type.Boolean():f==="number"?yield c.Type.Number():f==="bigint"?yield c.Type.BigInt():f==="string"?yield c.Type.String():yield(()=>{let T=f.split("|").map(b=>c.Type.Literal(b.trim()));return T.length===0?c.Type.Never():T.length===1?T[0]:c.Type.Union(T)})()}function*i(p){if(p[1]!=="{"){let f=c.Type.Literal("$"),T=n(p.slice(1));return yield*[f,...T]}for(let f=2;f<p.length;f++)if(p[f]==="}"){let T=e(p.slice(2,f)),b=n(p.slice(f+1));return yield*[...T,...b]}yield c.Type.Literal(p)}function*n(p){for(let f=0;f<p.length;f++)if(p[f]==="$"){let T=c.Type.Literal(p.slice(0,f)),b=i(p.slice(f));return yield*[T,...b]}yield c.Type.Literal(p)}function u(p){return[...n(p)]}o.Parse=u})(jn||(c.TemplateLiteralDslParser=jn={}));var pn=class{constructor(e){this.schema=e}Decode(e){return new fn(this.schema,e)}};c.TransformDecodeBuilder=pn;var fn=class{constructor(e,i){this.schema=e,this.decode=i}Encode(e){let i=E.Type(this.schema);return l.TTransform(i)?(()=>{let p={Encode:f=>i[c.Transform].Encode(e(f)),Decode:f=>this.decode(i[c.Transform].Decode(f))};return{...i,[c.Transform]:p}})():(()=>{let n={Decode:this.decode,Encode:e};return{...i,[c.Transform]:n}})()}};c.TransformEncodeBuilder=fn;var lt=0,dn=class extends le{};c.TypeBuilderError=dn;var Tn=class{Create(e){return e}Throw(e){throw new dn(e)}Discard(e,i){return i.reduce((n,u)=>{let{[u]:p,...f}=n;return f},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};c.TypeBuilder=Tn;var Ge=class extends Tn{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...E.Type(e),[c.Readonly]:"Readonly"}}Optional(e){return{...E.Type(e),[c.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[c.Kind]:"Any"})}Array(e,i={}){return this.Create({...i,[c.Kind]:"Array",type:"array",items:E.Type(e)})}Boolean(e={}){return this.Create({...e,[c.Kind]:"Boolean",type:"boolean"})}Capitalize(e,i={}){return{...Me.Map(E.Type(e),"Capitalize"),...i}}Composite(e,i){let n=c.Type.Intersect(e,{}),p=on.ResolveKeys(n,{includePatterns:!1}).reduce((f,T)=>({...f,[T]:c.Type.Index(n,[T])}),{});return c.Type.Object(p,i)}Enum(e,i={}){if(U.IsUndefined(e))return this.Throw("Enum undefined or empty");let n=Object.getOwnPropertyNames(e).filter(f=>isNaN(f)).map(f=>e[f]),p=[...new Set(n)].map(f=>c.Type.Literal(f));return this.Union(p,{...i,[c.Hint]:"Enum"})}Extends(e,i,n,u,p={}){switch(Le.Extends(e,i)){case g.Union:return this.Union([E.Type(n,p),E.Type(u,p)]);case g.True:return E.Type(n,p);case g.False:return E.Type(u,p)}}Exclude(e,i,n={}){return l.TTemplateLiteral(e)?this.Exclude(Oe.Resolve(e),i,n):l.TTemplateLiteral(i)?this.Exclude(e,Oe.Resolve(i),n):l.TUnion(e)?(()=>{let u=e.anyOf.filter(p=>Le.Extends(p,i)===g.False);return u.length===1?E.Type(u[0],n):this.Union(u,n)})():Le.Extends(e,i)!==g.False?this.Never(n):E.Type(e,n)}Extract(e,i,n={}){return l.TTemplateLiteral(e)?this.Extract(Oe.Resolve(e),i,n):l.TTemplateLiteral(i)?this.Extract(e,Oe.Resolve(i),n):l.TUnion(e)?(()=>{let u=e.anyOf.filter(p=>Le.Extends(p,i)!==g.False);return u.length===1?E.Type(u[0],n):this.Union(u,n)})():Le.Extends(e,i)!==g.False?E.Type(e,n):this.Never(n)}Index(e,i,n={}){return l.TArray(e)&&l.TNumber(i)?E.Type(e.items,n):l.TTuple(e)&&l.TNumber(i)?(()=>{let p=(U.IsUndefined(e.items)?[]:e.items).map(f=>E.Type(f));return this.Union(p,n)})():(()=>{let u=Ze.Resolve(i),p=E.Type(e);return wn.Resolve(p,u,n)})()}Integer(e={}){return this.Create({...e,[c.Kind]:"Integer",type:"integer"})}Intersect(e,i={}){if(e.length===0)return c.Type.Never();if(e.length===1)return E.Type(e[0],i);e.some(f=>l.TTransform(f))&&this.Throw("Cannot intersect transform types");let n=e.every(f=>l.TObject(f)),u=E.Rest(e),p=l.TSchema(i.unevaluatedProperties)?{unevaluatedProperties:E.Type(i.unevaluatedProperties)}:{};return i.unevaluatedProperties===!1||l.TSchema(i.unevaluatedProperties)||n?this.Create({...i,...p,[c.Kind]:"Intersect",type:"object",allOf:u}):this.Create({...i,...p,[c.Kind]:"Intersect",allOf:u})}KeyOf(e,i={}){return l.TRecord(e)?(()=>{let n=Object.getOwnPropertyNames(e.patternProperties)[0];return n===c.PatternNumberExact?this.Number(i):n===c.PatternStringExact?this.String(i):this.Throw("Unable to resolve key type from Record key pattern")})():l.TTuple(e)?(()=>{let u=(U.IsUndefined(e.items)?[]:e.items).map((p,f)=>c.Type.Literal(f.toString()));return this.Union(u,i)})():l.TArray(e)?this.Number(i):(()=>{let n=on.ResolveKeys(e,{includePatterns:!1});if(n.length===0)return this.Never(i);let u=n.map(p=>this.Literal(p));return this.Union(u,i)})()}Literal(e,i={}){return this.Create({...i,[c.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,i={}){return{...Me.Map(E.Type(e),"Lowercase"),...i}}Never(e={}){return this.Create({...e,[c.Kind]:"Never",not:{}})}Not(e,i){return this.Create({...i,[c.Kind]:"Not",not:E.Type(e)})}Null(e={}){return this.Create({...e,[c.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[c.Kind]:"Number",type:"number"})}Object(e,i={}){let n=Object.getOwnPropertyNames(e),u=n.filter(b=>l.TOptional(e[b])),p=n.filter(b=>!u.includes(b)),f=l.TSchema(i.additionalProperties)?{additionalProperties:E.Type(i.additionalProperties)}:{},T=n.reduce((b,P)=>({...b,[P]:E.Type(e[P])}),{});return p.length>0?this.Create({...i,...f,[c.Kind]:"Object",type:"object",properties:T,required:p}):this.Create({...i,...f,[c.Kind]:"Object",type:"object",properties:T})}Omit(e,i,n={}){let u=Ze.Resolve(i);return _e.Map(this.Discard(E.Type(e),["$id",c.Transform]),p=>{U.IsArray(p.required)&&(p.required=p.required.filter(f=>!u.includes(f)),p.required.length===0&&delete p.required);for(let f of Object.getOwnPropertyNames(p.properties))u.includes(f)&&delete p.properties[f];return this.Create(p)},n)}Partial(e,i={}){return _e.Map(this.Discard(E.Type(e),["$id",c.Transform]),n=>{let u=Object.getOwnPropertyNames(n.properties).reduce((p,f)=>({...p,[f]:this.Optional(n.properties[f])}),{});return this.Object(u,this.Discard(n,["required"]))},i)}Pick(e,i,n={}){let u=Ze.Resolve(i);return _e.Map(this.Discard(E.Type(e),["$id",c.Transform]),p=>{U.IsArray(p.required)&&(p.required=p.required.filter(f=>u.includes(f)),p.required.length===0&&delete p.required);for(let f of Object.getOwnPropertyNames(p.properties))u.includes(f)||delete p.properties[f];return this.Create(p)},n)}Record(e,i,n={}){return l.TTemplateLiteral(e)?(()=>{let u=De.ParseExact(e.pattern);return Ve.Check(u)?this.Object([...qe.Generate(u)].reduce((p,f)=>({...p,[f]:E.Type(i)}),{}),n):this.Create({...n,[c.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:E.Type(i)}})})():l.TUnion(e)?(()=>{let u=Sn.Resolve(e);if(l.TUnionLiteral(u)){let p=u.anyOf.reduce((f,T)=>({...f,[T.const]:E.Type(i)}),{});return this.Object(p,{...n,[c.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():l.TLiteral(e)?U.IsString(e.const)||U.IsNumber(e.const)?this.Object({[e.const]:E.Type(i)},n):this.Throw("Record key of type literal is not of type string or number"):l.TInteger(e)||l.TNumber(e)?this.Create({...n,[c.Kind]:"Record",type:"object",patternProperties:{[c.PatternNumberExact]:E.Type(i)}}):l.TString(e)?(()=>{let u=U.IsUndefined(e.pattern)?c.PatternStringExact:e.pattern;return this.Create({...n,[c.Kind]:"Record",type:"object",patternProperties:{[u]:E.Type(i)}})})():this.Never()}Recursive(e,i={}){U.IsUndefined(i.$id)&&(i.$id=`T${lt++}`);let n=e({[c.Kind]:"This",$ref:`${i.$id}`});return n.$id=i.$id,this.Create({...i,[c.Hint]:"Recursive",...n})}Ref(e,i={}){return U.IsString(e)?this.Create({...i,[c.Kind]:"Ref",$ref:e}):(U.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...i,[c.Kind]:"Ref",$ref:e.$id}))}Required(e,i={}){return _e.Map(this.Discard(E.Type(e),["$id",c.Transform]),n=>{let u=Object.getOwnPropertyNames(n.properties).reduce((p,f)=>({...p,[f]:this.Discard(n.properties[f],[c.Optional])}),{});return this.Object(u,n)},i)}Rest(e){return l.TTuple(e)&&!U.IsUndefined(e.items)?E.Rest(e.items):l.TIntersect(e)?E.Rest(e.allOf):l.TUnion(e)?E.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[c.Kind]:"String",type:"string"})}TemplateLiteral(e,i={}){let n=U.IsString(e)?un.Create(jn.Parse(e)):un.Create(e);return this.Create({...i,[c.Kind]:"TemplateLiteral",type:"string",pattern:n})}Transform(e){return new pn(e)}Tuple(e,i={}){let[n,u,p]=[!1,e.length,e.length],f=E.Rest(e),T=e.length>0?{...i,[c.Kind]:"Tuple",type:"array",items:f,additionalItems:n,minItems:u,maxItems:p}:{...i,[c.Kind]:"Tuple",type:"array",minItems:u,maxItems:p};return this.Create(T)}Uncapitalize(e,i={}){return{...Me.Map(E.Type(e),"Uncapitalize"),...i}}Union(e,i={}){return l.TTemplateLiteral(e)?Oe.Resolve(e):(()=>{let n=e;if(n.length===0)return this.Never(i);if(n.length===1)return this.Create(E.Type(n[0],i));let u=E.Rest(n);return this.Create({...i,[c.Kind]:"Union",anyOf:u})})()}Unknown(e={}){return this.Create({...e,[c.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[c.Kind]:e[c.Kind]||"Unsafe"})}Uppercase(e,i={}){return{...Me.Map(E.Type(e),"Uppercase"),...i}}};c.JsonTypeBuilder=Ge;var yn=class extends Ge{AsyncIterator(e,i={}){return this.Create({...i,[c.Kind]:"AsyncIterator",type:"AsyncIterator",items:E.Type(e)})}Awaited(e,i={}){let n=u=>u.length>0?(()=>{let[p,...f]=u;return[this.Awaited(p),...n(f)]})():u;return l.TIntersect(e)?c.Type.Intersect(n(e.allOf)):l.TUnion(e)?c.Type.Union(n(e.anyOf)):l.TPromise(e)?this.Awaited(e.item):E.Type(e,i)}BigInt(e={}){return this.Create({...e,[c.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,i={}){return this.Tuple([...e.parameters],{...i})}Constructor(e,i,n){let[u,p]=[E.Rest(e),E.Type(i)];return this.Create({...n,[c.Kind]:"Constructor",type:"Constructor",parameters:u,returns:p})}Date(e={}){return this.Create({...e,[c.Kind]:"Date",type:"Date"})}Function(e,i,n){let[u,p]=[E.Rest(e),E.Type(i)];return this.Create({...n,[c.Kind]:"Function",type:"Function",parameters:u,returns:p})}InstanceType(e,i={}){return E.Type(e.returns,i)}Iterator(e,i={}){return this.Create({...i,[c.Kind]:"Iterator",type:"Iterator",items:E.Type(e)})}Parameters(e,i={}){return this.Tuple(e.parameters,{...i})}Promise(e,i={}){return this.Create({...i,[c.Kind]:"Promise",type:"Promise",item:E.Type(e)})}RegExp(e,i={}){let n=U.IsString(e)?e:e.source;return this.Create({...i,[c.Kind]:"String",type:"string",pattern:n})}RegEx(e,i={}){return this.RegExp(e,i)}ReturnType(e,i={}){return E.Type(e.returns,i)}Symbol(e){return this.Create({...e,[c.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[c.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[c.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[c.Kind]:"Void",type:"void"})}};c.JavaScriptTypeBuilder=yn;c.JsonType=new Ge;c.Type=new yn});var L=Fn(Bn(),1),ut=(o,e,i)=>L.default.createLanguage({entry:n=>L.default.alt(n.FunctionCall,L.default.any).many().map(u=>u.filter(p=>typeof p=="object")),stringLiteral:n=>L.default.alt(n.doubleQuotedString,n.singleQuotedString),doubleQuotedString:()=>L.default.string('"').then(L.default.regex(/[^"]*/)).skip(L.default.string('"')),singleQuotedString:()=>L.default.string("'").then(L.default.regex(/[^']*/)).skip(L.default.string("'")),whitespace:()=>L.default.optWhitespace,colon:n=>L.default.string(":").trim(n.whitespace),comma:n=>L.default.string(",").trim(n.whitespace),nsValue:n=>L.default.seq(n.whitespace,L.default.string("ns").trim(n.whitespace).skip(n.colon),n.stringLiteral.trim(n.whitespace)).map(([,,u])=>`${u}`),FunctionCall:function(n){return L.default.seqMap(L.default.regex(/[^a-zA-Z0-9]/),L.default.string("t"),L.default.string("("),L.default.index,n.stringLiteral,L.default.index,L.default.regex(/[^)]*/),L.default.string(")"),(u,p,f,T,b,P,m)=>{let R=n.comma.then(L.default.string("{")).trim(n.whitespace).then(n.nsValue).skip(L.default.string("}")).skip(L.default.regex(/[^)]*/)).trim(n.whitespace).parse(m).value;return typeof o.pathPattern=="object"&&(R?b=R+":"+(i?i+".":"")+b:b.includes(":")||(b=(e||Object.keys(o.pathPattern)[0])+":"+(i?i+".":"")+b)),{messageId:b,position:{start:{line:T.line,character:T.column},end:{line:P.line,character:P.column}}}})}}),$n=o=>L.default.createLanguage({entry:e=>L.default.alt(e.FunctionCall,L.default.any).many().map(i=>i.filter(n=>typeof n=="object")),stringLiteral:e=>L.default.alt(e.doubleQuotedString,e.singleQuotedString),doubleQuotedString:()=>L.default.string('"').then(L.default.regex(/[^"]*/)).skip(L.default.string('"')),singleQuotedString:()=>L.default.string("'").then(L.default.regex(/[^']*/)).skip(L.default.string("'")),comma:e=>L.default.string(",").trim(e.whitespace),whitespace:()=>L.default.optWhitespace,colon:e=>L.default.string(":").trim(e.whitespace),keyPrefixValue:e=>L.default.seq(e.whitespace,L.default.string("keyPrefix").trim(e.whitespace).skip(e.colon),e.stringLiteral.trim(e.whitespace)).map(([,,i])=>`${i}`),FunctionCall:function(e){return L.default.seqMap(L.default.regex(/[^a-zA-Z0-9]/),L.default.regex(/\buseTranslations?\b/),L.default.string(o),L.default.index,e.stringLiteral,L.default.index,L.default.regex(/[^)]*/),L.default.string(")"),(i,n,u,p,f,T,b)=>{let m=e.comma.then(L.default.string("{")).trim(e.whitespace).then(e.keyPrefixValue).skip(L.default.string("}")).skip(L.default.regex(/[^)]*/)).trim(e.whitespace).parse(b).value;return{ns:f,keyPrefix:m}})}});function ct(o,e){if(typeof o.pathPattern=="object"){let n=$n("(").entry.tryParse(e);if(n.length>0)return{ns:n[0].ns,keyPrefix:n[0].keyPrefix};{let p=$n("([").entry.tryParse(e);return p.length>0?{ns:p[0].ns,keyPrefix:p[0].keyPrefix}:void 0}}else return}function tn(o,e){try{let i=ct(e,o),n=i?.ns,u=i?.keyPrefix;return ut(e,n,u).entry.tryParse(o)}catch{return[]}}var kn={messageReferenceMatchers:[async o=>tn(o.documentText,o.settings)],extractMessageOptions:[{callback:o=>({bundleId:o.bundleId,messageReplacement:`{t("${o.bundleId}")}`})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"}]};var te=Fn(hn(),1),Un=te.Type.String({pattern:"^(\\./|\\../|/)[^*]*\\{(languageTag|locale)\\}[^*]*\\.json$",title:"Path to language files",description:"Specify the pathPattern to locate language files in your repository. It must include `{locale}` and end with `.json`.",examples:["./{locale}/file.json","../folder/{locale}/file.json","./{locale}.json"]}),Mn=te.Type.Record(te.Type.String({pattern:"^[^.]+$",description:"Dots are not allowd ",examples:["website","app","homepage"]}),Un),_n=te.Type.Object({pathPattern:te.Type.Union([Un,Mn]),variableReferencePattern:te.Type.Optional(te.Type.Array(te.Type.String(),{title:"Variable reference pattern",description:"The pattern to match content in the messages. You can define an opening and closing pattern. The closing pattern is not required. The default is '{{' and '}}'.",examples:["{ and }","{{ and }}","< and >","@:"]})),sourceLanguageFilePath:te.Type.Optional(te.Type.Union([Un,Mn],{title:"Source language file path",description:"Sometimes it is necessary to specify the location of the source language file(s) when they do not follow the standard naming or file structure convention."})),ignore:te.Type.Optional(te.Type.Array(te.Type.String(),{title:"Ignore paths",description:"Set a path that should be ignored."}))});function ze(o,e,i){return o.replace(new RegExp(pt(e),"g"),i)}function pt(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Dn(o){return o&&o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function Vn(o){return o}function en(o,e){e=e||{};let i=e.delimiter||".",n=e.maxDepth,u=e.transformKey||Vn,p={};function f(T,b,P){P=P||1,Object.keys(T).forEach(function(m){let I=T[m],R=e.safe&&Array.isArray(I),v=Object.prototype.toString.call(I),j=Dn(I),N=v==="[object Object]"||v==="[object Array]",B=b?b+i+u(m):u(m);if(!R&&!j&&N&&Object.keys(I).length&&(!e.maxDepth||P<n))return f(I,B,P+1);p[B]=I})}return f(o),p}function Je(o,e){e=e||{};let i=e.delimiter||".",n=e.overwrite||!1,u=e.transformKey||Vn,p={};if(Dn(o)||Object.prototype.toString.call(o)!=="[object Object]")return o;function T(m){let I=Number(m);return isNaN(I)||m.indexOf(".")!==-1||e.object?m:I}function b(m,I,R){return Object.keys(R).reduce(function(v,j){return v[m+i+j]=R[j],v},I)}function P(m){let I=Object.prototype.toString.call(m),R=I==="[object Array]",v=I==="[object Object]";if(m){if(R)return!m.length;if(v)return!Object.keys(m).length}else return!0}return o=Object.keys(o).reduce(function(m,I){let R=Object.prototype.toString.call(o[I]);return!(R==="[object Object]"||R==="[object Array]")||P(o[I])?(m[I]=o[I],m):b(I,m,en(o[I],e))},{}),Object.keys(o).forEach(function(m){let I=m.split(i).map(u),R=T(I.shift()),v=T(I[0]),j=p;for(;v!==void 0;){if(R==="__proto__")return;let N=Object.prototype.toString.call(j[R]),B=N==="[object Object]"||N==="[object Array]";if(!n&&!B&&typeof j[R]<"u")return;(n&&!B||!n&&j[R]==null)&&(j[R]=typeof v=="number"&&!e.object?[]:{}),j=j[R],I.length>0&&(R=T(I.shift()),v=T(I[0]))}j[R]=Je(o[m],e)}),p}var Rn=!1,qn="plugin.inlang.i18next",Ne={id:qn,key:qn,displayName:"Inlang i18next",description:"A plugin for the inlang SDK that uses a JSON file per language tag to store translations.",settingsSchema:_n,loadMessages:async({settings:o,nodeishFs:e})=>(o["plugin.inlang.i18next"].variableReferencePattern=o["plugin.inlang.i18next"].variableReferencePattern||["{{","}}"],ft({settings:o,pluginSettings:o["plugin.inlang.i18next"],nodeishFs:e})),saveMessages:async({messages:o,settings:e,nodeishFs:i})=>(e["plugin.inlang.i18next"].variableReferencePattern=e["plugin.inlang.i18next"].variableReferencePattern||["{{","}}"],Tt({pluginSettings:e["plugin.inlang.i18next"],nodeishFs:i,messages:o})),addCustomApi:({settings:o})=>gt(o["plugin.inlang.i18next"])};async function ft(o){let e=[],i=dt(o.settings.languageTags,o.settings.sourceLanguageTag),n=50,u=[];for(let p=0;p<i.length;p+=n)u.push(i.slice(p,p+n));for(let p of u)await Promise.all(p.flatMap(f=>typeof o.pluginSettings.pathPattern!="string"?Object.entries(o.pluginSettings.pathPattern).map(([T,b])=>zn(b,f,o.settings.sourceLanguageTag,o.nodeishFs,typeof o.pluginSettings.sourceLanguageFilePath=="object"&&f===o.settings.sourceLanguageTag?o.pluginSettings.sourceLanguageFilePath[T]:void 0).then(P=>{for(let[m,I]of Object.entries(P))if(Object.keys(I).length!==0){let R=T+":"+ze(m,"u002E",".");Jn(e,R,f,I,o.pluginSettings)}})):zn(o.pluginSettings.pathPattern,f,o.settings.sourceLanguageTag,o.nodeishFs,typeof o.pluginSettings.sourceLanguageFilePath=="string"&&f===o.settings.sourceLanguageTag?o.pluginSettings.sourceLanguageFilePath:void 0).then(T=>{for(let[b,P]of Object.entries(T))Object.keys(P).length!==0&&Jn(e,ze(b,"u002E","."),f,P,o.pluginSettings)})));return e}async function zn(o,e,i,n,u){typeof u>"u"&&(u=o.replace("{languageTag}",e));try{let p=await n.readFile(u,{encoding:"utf-8"}),f=JSON.parse(p);return Object.values(f).some(b=>typeof b=="object")&&(Rn=!0),Rn?en(f,{transformKey:function(b){return ze(b,".","u002E")}}):f}catch(p){if(p.code==="FileNotFound"||p.code==="ENOENT")return{};throw p}}var dt=(o,e)=>{let i=o.filter(n=>n!==e);return i.unshift(e),i},Jn=(o,e,i,n,u)=>{let p=o.findIndex(f=>f.id===e);if(p!==-1){let f={languageTag:i,match:[],pattern:Hn(n,u.variableReferencePattern)};o[p]?.variants.push(f)}else{let f={id:e,alias:{},selectors:[],variants:[]};f.variants=[{languageTag:i,match:[],pattern:Hn(n,u.variableReferencePattern)}],o.push(f)}};function Hn(o,e){let i=e[1]?new RegExp(`(\\${e[0]}[^\\${e[1]}]+\\${e[1]})`,"g"):new RegExp(`(${e}\\w+)`,"g");return o.split(i).filter(u=>u!=="").map(u=>i.test(u)&&e[0]?{type:"VariableReference",name:e[1]?u.slice(e[0].length,-e[1].length):u.slice(e[0].length)}:{type:"Text",value:u})}async function Tt(o){if(typeof o.pluginSettings.pathPattern=="object"){let e={};for(let i of o.messages)for(let n of i.variants){let u=i.id.includes(":")?i.id.split(":")[0]:Object.keys(o.pluginSettings.pathPattern)[0],p=i.id.replace(u+":","");e[n.languageTag]??={},e[n.languageTag][u]??={},e[n.languageTag][u][p]=n.pattern}for(let[i,n]of Object.entries(e)){for(let[u,p]of Object.entries(o.pluginSettings.pathPattern)){let f=typeof o.pluginSettings.sourceLanguageFilePath=="object"&&i===Object.keys(e)[0]?o.pluginSettings.sourceLanguageFilePath[u].split("/").slice(0,-1).join("/"):p.replace("{languageTag}",i).split("/").slice(0,-1).join("/");try{await o.nodeishFs.readdir(f)}catch{await o.nodeishFs.mkdir(f)}}for(let[u,p]of Object.entries(n)){let f=typeof o.pluginSettings.sourceLanguageFilePath=="object"&&i===Object.keys(e)[0]?o.pluginSettings.sourceLanguageFilePath[u]:o.pluginSettings.pathPattern[u].replace("{languageTag}",i);await o.nodeishFs.writeFile(f,Wn(p,o.pluginSettings.variableReferencePattern))}}}else{let e={};for(let i of o.messages)for(let n of i.variants)e[n.languageTag]??={},e[n.languageTag][i.id]=n.pattern;for(let[i,n]of Object.entries(e)){let u=typeof o.pluginSettings.sourceLanguageFilePath=="string"&&i===Object.keys(e)[0]?o.pluginSettings.sourceLanguageFilePath:o.pluginSettings.pathPattern.replace("{languageTag}",i);try{await o.nodeishFs.readdir(u.split("/").slice(0,-1).join("/"))}catch{await o.nodeishFs.mkdir(u.split("/").slice(0,-1).join("/"),{recursive:!0})}await o.nodeishFs.writeFile(u,Wn(n,o.pluginSettings.variableReferencePattern))}}}function Wn(o,e){let i={};for(let[n,u]of Object.entries(o)){let p=ze(n,"..","u002E.");p.slice(-1)==="."&&(p=p.replace(/.$/,"u002E")),i[p]=yt(u,e)}return Rn&&(i=Je(i,{object:!0})),ze(JSON.stringify(i,void 0,"	"),"u002E",".")}function yt(o,e){let i=[];for(let n of o)switch(n.type){case"Text":i.push(n.value);break;case"VariableReference":i.push(e[1]?`${e[0]}${n.name}${e[1]}`:`${e[0]}${n.name}`);break;default:throw new Error(`Unknown message pattern element of type: ${n?.type}`)}return i.join("")}var gt=o=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>tn(e.documentText,o)],extractMessageOptions:[{callback:e=>({messageId:e.messageId,messageReplacement:`{t("${e.messageId}")}`})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"}]}});var Qn=async({files:o,settings:e})=>{let i=[],n=[],u=[];for(let T of o){let b=T.toBeImportedFilesMetadata?.namespace,P=mt({namespace:b,locale:T.locale,content:T.content,settings:e?.["plugin.inlang.i18next"]});i.push(...P.bundles),n.push(...P.messages),u.push(...P.variants)}return{bundles:[...new Set(i.map(T=>T.id))].map(T=>{let b=i.filter(m=>m.id===T),P=Yn(b.flatMap(m=>m.declarations));return{id:T,declarations:P}}),messages:n,variants:u}};function mt(o){let e=en(JSON.parse(new TextDecoder().decode(o.content))),i=[],n=[],u=[];for(let p in e){let f=e[p],{bundle:T,message:b,variant:P}=bt({namespace:o.namespace,key:p,value:f,locale:o.locale,resource:e,settings:o.settings});i.push(T),n.push(b),u.push(P)}return{bundles:i,messages:n,variants:u}}function bt(o){let e=vt(o.value,o.settings),i=o.key.split("_")[0];o.namespace&&(i=`${o.namespace}:${i}`);let n={id:i,declarations:e.variableReferences.map(P=>({type:"input-variable",name:P.name}))},u={bundleId:i,selectors:[],locale:o.locale},p={messageBundleId:i,messageLocale:o.locale,matches:[],pattern:e.result},f=En(o.key),T=f?o.key.split("_").length===3:o.key.split("_").length===2,b=En(o.key)===!1&&Object.keys(o.resource).some(P=>o.key.split("_")[0]===P.split("_")[0]&&En(P));if(T&&f===!1&&b===!1){let[,P]=o.key.split("_");n.declarations.push({type:"input-variable",name:"context"}),u.selectors=[{type:"variable-reference",name:"context"}],p.matches=[{type:"literal-match",key:"context",value:P}]}else if(T&&f&&b===!1){let[,P,m]=o.key.split("_");n.declarations.push({type:"input-variable",name:"context"}),n.declarations.push({type:"input-variable",name:"count"}),n.declarations.push({type:"local-variable",name:"countPlural",value:{type:"expression",arg:{type:"variable-reference",name:"count"},annotation:{type:"function-reference",name:"plural",options:[]}}}),u.selectors=[{type:"variable-reference",name:"context"},{type:"variable-reference",name:"countPlural"}],p.matches=[{type:"literal-match",key:"context",value:P},{type:"literal-match",key:"countPlural",value:m}]}else f&&b===!1?(p.matches=[{type:"literal-match",key:"countPlural",value:o.key.split("_").at(-1)}],u.selectors=[{type:"variable-reference",name:"countPlural"}],n.declarations.push({type:"input-variable",name:"count"}),n.declarations.push({type:"local-variable",name:"countPlural",value:{type:"expression",arg:{type:"variable-reference",name:"count"},annotation:{type:"function-reference",name:"plural",options:[]}}})):b&&(p.matches=[{type:"catchall-match",key:"context"}]);return n.declarations=Yn(n.declarations),{bundle:n,message:u,variant:p}}function vt(o,e){let i=[],n=[],u=e?.variableReferencePattern??["{{","}}"],p=o.split(new RegExp(`(${u[0]}.*?${u[1]})`)).filter(f=>f!=="");for(let f of p)if((f.startsWith(u[0])&&f.endsWith(u[1]))===!1)i.push({type:"text",value:f});else{let T=f.slice(u[0].length,-u[1].length).split(","),b=T[0]?.trim(),P=T[1]?.trim();if(b===void 0)throw new Error("Expected an argument in the expression but received undefined.");let m={type:"variable-reference",name:b};n.push(m),i.push({type:"expression",arg:m,...P&&{annotation:{type:"function-reference",name:P,options:[]}}})}return{variableReferences:n,result:i}}var Yn=o=>[...new Set(o.map(e=>JSON.stringify(e)))].map(e=>JSON.parse(e)),En=o=>o.endsWith("_zero")||o.endsWith("_one")||o.endsWith("_two")||o.endsWith("_few")||o.endsWith("_many")||o.endsWith("_other");var Zn=async({bundles:o,messages:e,variants:i,settings:n})=>{let u={},p={};for(let b of e){let P=It(o.find(m=>m.id===b.bundleId),b,i.filter(m=>m.messageId===b.id),n?.["plugin.inlang.i18next"]);for(let m of P)if(m.key.includes(":")===!1)u[m.locale]===void 0&&(u[m.locale]={}),u[m.locale][m.key]=m.value;else{let[I,R]=m.key.split(":");p[I]===void 0&&(p[I]={}),p[I]?.[m.locale]===void 0&&(p[I][m.locale]={}),p[I][m.locale][R]=m.value}}let f=Object.entries(u).map(([b,P])=>({locale:b,content:new TextEncoder().encode(JSON.stringify(Je(P),void 0,"	")+`
`),name:`${b}.json`})),T=Object.entries(p).flatMap(([b,P])=>Object.entries(P).map(([m,I])=>({locale:m,content:new TextEncoder().encode(JSON.stringify(Je(I),void 0,"	")+`
`),name:`${b}-${m}.json`})));return[...f,...T]};function It(o,e,i,n){let u=[],p=o.declarations.some(T=>T.type==="input-variable"&&T.name==="context"),f=o.declarations.some(T=>T.type==="local-variable"&&T.value.annotation?.type==="function-reference"&&T.value.annotation?.name==="plural");for(let T of i){let b=Ot(T.pattern,n),P=T.matches.find(j=>j.type==="literal-match"&&j.key==="context"),m=T.matches.find(j=>j.type==="literal-match"&&j.key==="countPlural"),I=T.matches.some(j=>j.type==="catchall-match");if(p&&P===void 0)throw new Error("The variant does not have a context match");if(f&&m===void 0)throw new Error("The variant does not have a plural match");let R;p&&f&&I?R=`${o.id}_${P?.value}`:p&&f&&I===!1?R=`${o.id}_${P?.value}_${m?.value}`:p===!1&&f?R=`${o.id}_${m?.value}`:p&&f===!1?R=`${o.id}_${P?.value}`:R=o.id;let v=b;u.push({key:R,value:v,locale:e.locale})}return u}function Ot(o,e){let i="",n=e?.variableReferencePattern??["{{","}}"];for(let u of o)if(u.type==="text")i+=u.value;else if(u.arg.type==="variable-reference"&&u.annotation===void 0)i+=`${n[0]}${u.arg.name}${n[1]}`;else if(u.arg.type==="variable-reference"&&u.annotation!==void 0&&u.annotation.options.length===0)i+=`${n[0]}${u.arg.name}, ${u.annotation.name}${n[1]}`;else if(u.arg.type==="variable-reference"&&u.annotation!==void 0&&u.annotation.options.length>0)throw new Error("Not implemented");return i}var Xn=async({settings:o})=>{let e=[],i=o[Ln]?.pathPattern;if(i===void 0)return[];if(typeof i=="string"){for(let n of o.locales)e.push({locale:n,path:i.replace(/{(locale|languageTag)}/,n)});return e}for(let n of o.locales)for(let u in i)e.push({locale:n,path:i[u].replace(/{(locale|languageTag)}/,n),metadata:{namespace:u}});return e};var Ln="plugin.inlang.i18next",Gn={id:Ne.id,key:Ln,displayName:Ne.displayName,description:Ne.description,addCustomApi:Ne.addCustomApi,loadMessages:Ne.loadMessages,saveMessages:Ne.saveMessages,importFiles:Qn,exportFiles:Zn,toBeImportedFiles:Xn,meta:{"app.inlang.ideExtension":kn}};var Yt=Gn;export{Yt as default};
